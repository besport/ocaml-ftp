<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="Start" href="index.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ftp" rel="Chapter" href="Ftp.html"><title>Ftp</title>
</head>
<body>
<div class="navbar">&nbsp;<a href="index.html">Up</a>
&nbsp;</div>
<center><h1>Module <a href="type_Ftp.html">Ftp</a></h1></center>
<br>
<pre><span class="keyword">module</span> Ftp: <code class="code">sig</code> <a href="Ftp.html">..</a> <code class="code">end</code></pre>Functions for accessing files via ftp.<br>
<b>Author(s):</b> Samuel Mimram<br>
<hr width="100%">
<pre><span class="keyword">type</span> <a name="TYPEftp_connection"></a><code class="type"></code>ftp_connection </pre>
<div class="info">
An ftp connection to an ftp server.<br>
</div>

<br><code><span class="keyword">type</span> <a name="TYPEfile_kind"></a><code class="type"></code>file_kind = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_REG</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>regular file</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_DIR</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>directory</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_CHR</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>character device</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_BLK</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>block device</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_LNK</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>symbolic link</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_FIFO</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>named pipe</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">S_SOCK</span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>socket</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info">
Kind of a file.<br>
</div>

<pre><span class="keyword">type</span> <a name="TYPEfile_perm"></a><code class="type"></code>file_perm = <code class="type">int</code> </pre>
<div class="info">
Permissions of a file.<br>
</div>

<br><code><span class="keyword">type</span> <a name="TYPEstats"></a><code class="type"></code>stats = {</code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_kind&nbsp;: <code class="type"><a href="Ftp.html#TYPEfile_kind">file_kind</a></code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>kind of the file</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_perm&nbsp;: <code class="type"><a href="Ftp.html#TYPEfile_perm">file_perm</a></code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>access rights</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_nlink&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>number of links</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_un&nbsp;: <code class="type">string</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>user name of the owner</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_gn&nbsp;: <code class="type">string</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>group of the file's group</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_size&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>size in bytes</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code>st_mtime&nbsp;: <code class="type">float</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code>last modification time</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
}

<div class="info">
Properties of a file.<br>
</div>

<pre><span class="keyword">exception</span> <a name="EXCEPTIONUnrecognised_format"></a>Unrecognised_format</pre>
<div class="info">
The library could not <code class="code">stat</code> correctly (the rfc of the ftp is infamous and does not specify the format of the output of the command LIST).<br>
</div>
<pre><span class="keyword">val</span> <a name="VALconnect"></a>connect : <code class="type">string -> int -> string -> string -> <a href="Ftp.html#TYPEftp_connection">ftp_connection</a></code></pre><div class="info">
<code class="code">connect server port login pass</code> connects to the server named <code class="code">server</code> on port <code class="code">port</code> using the given login and password.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALdisconnect"></a>disconnect : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> unit</code></pre><div class="info">
Close a previously opened connection.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALset_passive"></a>set_passive : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> bool -> unit</code></pre><div class="info">
Shoud the data connection be done in passive mode? (not used for now: the connection is always in passive mode).<br>
</div>
<pre><span class="keyword">val</span> <a name="VALget_cur_dir"></a>get_cur_dir : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string</code></pre><div class="info">
Get the directory we're currently in on the server.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALchdir"></a>chdir : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> unit</code></pre><div class="info">
Change the current directory.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALchdir_up"></a>chdir_up : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> unit</code></pre><div class="info">
Change the current directory to the surrounding one.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALlist_files"></a>list_files : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> string list</code></pre><div class="info">
List all the files contained in a directory.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALget_file_size"></a>get_file_size : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> int</code></pre><div class="info">
Get the size of a file (in bytes).<br>
</div>
<pre><span class="keyword">val</span> <a name="VALls"></a>ls : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> (string * <a href="Ftp.html#TYPEstats">stats</a>) list</code></pre><div class="info">
List all the files contained in a directory, specifying its properties. WARNING: it does not always work yet (in fact it has only been tested with proftpd).<br>
</div>
<pre><span class="keyword">val</span> <a name="VALstat"></a>stat : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> <a href="Ftp.html#TYPEstats">stats</a></code></pre><div class="info">
Get the properties of a file. If you only want its size, you should use <code class="code">get_size</code> which is supposed to work better.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALget_file"></a>get_file : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> string -> unit</code></pre><div class="info">
<code class="code">get_file fc src dst</code> downloads the file <code class="code">src</code> and stores it in <code class="code">dst</code>. Warning: if the file already exists it is replaced.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALresume_file"></a>resume_file : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> string -> int -> unit</code></pre><div class="info">
<code class="code">resume_file fc src dst ofs</code> downloads the file <code class="code">src</code> starting at offset <code class="code">ofs</code> and appends it to <code class="code">dst</code>. Raises <code class="code">Not_found</code> if the file does not already exists.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALget_file_portion"></a>get_file_portion : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> int -> string -> int -> int -> int</code></pre><div class="info">
<code class="code">get_file_portion fc src file_ofs buf ofs len</code> downloads <code class="code">len</code> octets of file <code class="code">src</code> starting at position <code class="code">file_ofs</code> and stores it in <code class="code">buf</code> starting at position <code class="code">ofs</code>. Returns the number of bytes actually read.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALmv"></a>mv : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> string -> unit</code></pre><div class="info">
<code class="code">mv fc src dst</code> moves the file <code class="code">src</code> to <code class="code">dst</code>.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALrm"></a>rm : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> unit</code></pre><div class="info">
Remove a file.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALrmdir"></a>rmdir : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> unit</code></pre><div class="info">
Remove a directory.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALmkdir"></a>mkdir : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> string -> unit</code></pre><div class="info">
Create a directory.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALnop"></a>nop : <code class="type"><a href="Ftp.html#TYPEftp_connection">ftp_connection</a> -> unit</code></pre><div class="info">
Don't do anything :)<br>
</div>
<pre><span class="keyword">module type</span> <a href="Ftp.FILE.html">FILE</a> = <code class="code">sig</code> <a href="Ftp.FILE.html">..</a> <code class="code">end</code></pre><div class="info">
Type of the module providing high-level functions to access files via ftp.
</div>
<pre><span class="keyword">module</span> <a href="Ftp.File.html">File</a>: <code class="type"><a href="Ftp.FILE.html">FILE</a></code><code class="type"> </code></pre><div class="info">
High-level functions to access files via ftp.
</div>
</body></html>